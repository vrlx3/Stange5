(this.webpackJsonpstranger_things=this.webpackJsonpstranger_things||[]).push([[0],{202:function(e,t,n){"use strict";n.r(t);n(151);var r=n(0),o=n(54),s=n.n(o),c=n(36),a=n(2),i=function(){return Object(a.jsx)("div",{id:"header",children:Object(a.jsxs)("div",{id:"navbar",children:[Object(a.jsx)(c.b,{to:"/",children:" Home"}),Object(a.jsx)(v,{}),Object(a.jsx)(c.b,{to:"/allPosts",children:"All Posts"}),Object(a.jsx)(x,{})]})})},u=n(10),l=n.n(u),p=n(14),j=n(11),h=function(){var e=Object(r.useState)(""),t=Object(j.a)(e,2),n=t[0],o=t[1],s=Object(r.useState)(""),c=Object(j.a)(s,2),i=c[0],u=c[1],h=Object(r.useState)(!1),d=Object(j.a)(h,2),b=d[0],O=d[1];return Object(a.jsx)("div",{id:"reguser",children:Object(a.jsxs)("form",{onSubmit:function(){var e=Object(p.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),fetch("https://strangers-things.herokuapp.com/api/2104-UIC-RM-WEB-FT/users/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:{username:n,password:i}})}).then((function(e){return e.json()})).then((function(e){console.log(e.data.token),localStorage.setItem("token",e.data.token),O(!0)})).catch(console.error),!0===b?alert("Thank you for registering"):!1===b&&alert("Please try again user name taken");case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:[Object(a.jsx)("input",{id:"username",type:"text",placeholder:"Choose Username",value:n,onChange:function(e){o(e.target.value)}}),Object(a.jsx)("p",{}),Object(a.jsx)("input",{id:"password",type:"text",placeholder:"Choose Password",minLength:8,required:!0,value:i,onChange:function(e){u(e.target.value)}}),Object(a.jsx)("p",{}),Object(a.jsx)("button",{type:"submit",children:"Register"})]})})},d=(n(180),function(){var e=Object(r.useState)(""),t=Object(j.a)(e,2),n=t[0],o=t[1],s=Object(r.useState)(""),c=Object(j.a)(s,2),i=c[0],u=c[1],h=Object(r.useState)(""),d=Object(j.a)(h,2),b=d[0],O=d[1],f="Bearer "+localStorage.getItem("token"),x=function(){var e=Object(p.a)(l.a.mark((function e(t){var r,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,fetch("https://strangers-things.herokuapp.com/api/2104-UIC-RM-WEB-FT/posts",{method:"POST",headers:{"Content-Type":"application/json",Authorization:f},body:JSON.stringify({post:{title:n,description:i,price:b}})});case 3:return r=e.sent,e.next=6,r.json();case 6:s=e.sent,console.log("data ",s),o(""),u(""),O(""),console.log(location.pathname),location.assign("/allPosts");case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("h3",{id:"makepost",children:"Create a Post"}),Object(a.jsxs)("form",{id:"postmake",onSubmit:x,children:[Object(a.jsx)("input",{type:"text",placeholder:"Title",value:n,onChange:function(e){return o(e.target.value)}}),Object(a.jsx)("input",{type:"text",placeholder:"Description",value:i,onChange:function(e){return u(e.target.value)}}),Object(a.jsx)("input",{type:"text",placeholder:"Price",value:b,onChange:function(e){return O(e.target.value)}}),Object(a.jsx)("button",{type:"submit",children:"Create"})]})]})}),b=function e(){var t=Object(r.useState)([]),n=Object(j.a)(t,2),o=n[0],s=n[1];console.log(o);var c="Bearer "+localStorage.getItem("token");Object(r.useState)((function(){(function(){var e=Object(p.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://strangers-things.herokuapp.com/api/2104-UIC-RM-WEB-FT/posts",{method:"GET",headers:{"Content-Type":"application/json",Authorization:c}});case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,s(n.data.posts);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var i=function(){var e=Object(p.a)(l.a.mark((function e(t){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.next=3,fetch("https://strangers-things.herokuapp.com/api/2104-UIC-RM-WEB-FT/posts/".concat(t),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:c}});case 3:return n=e.sent,e.next=6,n.json();case 6:r=e.sent,console.log("result",r),location.assign("/allposts");case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),u=function(){var t=Object(p.a)(l.a.mark((function t(n){var r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.preventDefault(),r=n.target[0].value.toLowerCase(),e().then((function(e){var t=e.filter((function(e){return e.title.toLowerCase().includes("".concat(r))||e.description.toLowerCase().includes("".concat(r))}));s(t)}));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(a.jsxs)("div",{id:"allPosts",children:[Object(a.jsxs)("form",{id:"searchbar",onSubmit:u,children:[Object(a.jsx)("label",{htmlFor:"searchterm",children:"Search: "}),Object(a.jsx)("input",{name:"searchterm",type:"text",placeholder:"search"}),Object(a.jsx)("button",{type:"submit",children:"Submit"})]}),Object(a.jsx)(d,{}),Object(a.jsx)("h1",{children:"All Posts"}),o.map((function(e){return Object(a.jsxs)("div",{id:e._id,children:[Object(a.jsx)("h3",{id:"post_title",children:e.title}),Object(a.jsx)("p",{id:"post_description",children:e.description}),Object(a.jsxs)("p",{id:"post_price",children:["Price: ",e.price]}),Object(a.jsxs)("p",{id:"post_location",children:["Location: ",e.location]}),Object(a.jsx)("p",{id:"post_deliver",children:e.willDeliver?"Delivery Included":"Pickup Only"}),Object(a.jsxs)("p",{id:"post_user",children:["Posted By: ",e.author.username]}),e.isAuthor?Object(a.jsx)("button",{onClick:function(t){return i(e._id)},children:"Delete"}):null,Object(a.jsx)("hr",{})]},e._id)}))]})};function O(){window.location.reload()}var f=function(){var e=Object(r.useState)(""),t=Object(j.a)(e,2),n=t[0],o=t[1],s=Object(r.useState)(""),c=Object(j.a)(s,2),i=c[0],u=c[1],h=function(){var e=Object(p.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),console.log(n,i),fetch("https://strangers-things.herokuapp.com/api/2104-UIC-RM-WEB-FT/users/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:{username:n,password:i}})}).then((function(e){return e.json()})).then((function(e){console.log(e.data.token),localStorage.setItem("token",e.data.token)})).catch(console.error),alert("Thank You for Logging In! Please Confirm Login"),o(""),u("");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsx)(a.Fragment,{children:Object(a.jsx)("div",{id:"logform",children:Object(a.jsxs)("form",{onSubmit:h,className:"loginuser",children:[Object(a.jsx)("input",{type:"text",placeholder:"Enter Username",value:n,onChange:function(e){return o(e.target.value)}}),Object(a.jsx)("p",{}),Object(a.jsx)("input",{type:"text",placeholder:"Enter Password",value:i,onChange:function(e){return u(e.target.value)}}),Object(a.jsx)("p",{}),Object(a.jsx)("button",{type:"submit",children:"Login"}),Object(a.jsx)("button",{type:"submit",onClick:O,children:"Confirm Login"})]})})})},x=function(){var e=function(){var e=Object(p.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),localStorage.setItem("token","");case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsx)(a.Fragment,{children:Object(a.jsx)("form",{onSubmit:e,children:Object(a.jsx)("button",{type:"submit",children:"Log Out"})})})},g=function(){var e=Object(r.useState)([]),t=Object(j.a)(e,2),n=t[0],o=t[1],s="Bearer "+localStorage.getItem("token");Object(r.useState)((function(){(function(){var e=Object(p.a)(l.a.mark((function e(){var t,n,r,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://strangers-things.herokuapp.com/api/2104-UIC-RM-WEB-FT/users/me",{headers:{"Content-Type":"application/json",Authorization:s}});case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,r=n.data.posts,c=r.filter((function(e){return!0===e.active})),console.log(r),console.log(c),o(c);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var c=function(){var e=Object(p.a)(l.a.mark((function e(t){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.next=3,fetch("https://strangers-things.herokuapp.com/api/2104-UIC-RM-WEB-FT/posts/".concat(t),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:s}});case 3:return n=e.sent,e.next=6,n.json();case 6:r=e.sent,console.log("result",r),location.assign("/myposts");case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(m,{}),Object(a.jsxs)("div",{id:"mypost",children:[Object(a.jsx)("h1",{children:"My Posts"}),n.map((function(e){return Object(a.jsxs)("div",{id:e._id,children:[Object(a.jsx)("h3",{id:"post_title",children:e.title}),Object(a.jsx)("p",{id:"post_description",children:e.description}),Object(a.jsxs)("p",{id:"post_price",children:["Price: ",e.price]}),Object(a.jsxs)("p",{id:"post_location",children:["Location: ",e.location]}),Object(a.jsx)("p",{id:"post_deliver",children:e.willDeliver?"Delivery Included":"Pickup Only"}),Object(a.jsx)("button",{onClick:function(t){return c(e._id)},children:"Delete"}),Object(a.jsx)("hr",{})]},e._id)}))]})]})},m=(n(218),n(219),n(138),n(215),n(221),n(217),n(216),function(){var e=Object(r.useState)(""),t=Object(j.a)(e,2),n=t[0],o=t[1],s=Object(r.useState)(""),c=Object(j.a)(s,2),i=c[0],u=c[1],h=Object(r.useState)(""),d=Object(j.a)(h,2),b=d[0],O=d[1],f="Bearer "+localStorage.getItem("token"),x=function(){var e=Object(p.a)(l.a.mark((function e(t){var r,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,fetch("https://strangers-things.herokuapp.com/api/2104-UIC-RM-WEB-FT/posts",{method:"POST",headers:{"Content-Type":"application/json",Authorization:f},body:JSON.stringify({post:{title:n,description:i,price:b}})});case 3:return r=e.sent,e.next=6,r.json();case 6:s=e.sent,console.log("data ",s),o(""),u(""),O(""),console.log(location.pathname),location.assign("/myposts");case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("h3",{id:"makepost",children:"Create a Post"}),Object(a.jsxs)("form",{id:"postmake",onSubmit:x,children:[Object(a.jsx)("input",{type:"text",placeholder:"Title",value:n,onChange:function(e){return o(e.target.value)}}),Object(a.jsx)("input",{type:"text",placeholder:"Description",value:i,onChange:function(e){return u(e.target.value)}}),Object(a.jsx)("input",{type:"text",placeholder:"Price",value:b,onChange:function(e){return O(e.target.value)}}),Object(a.jsx)("button",{type:"submit",children:"Create"})]})]})}),v=function(){var e=!!localStorage.getItem("token");return console.log("logged in ",e),e?Object(a.jsx)(c.b,{to:"/myposts",children:"My Posts"}):e?void 0:Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(c.b,{to:"/login",children:"Login"}),Object(a.jsx)(c.b,{to:"/registration",children:"Register"})]})},y=n(12),k=function(){return Object(a.jsx)(c.a,{children:Object(a.jsxs)("div",{id:"app",children:[Object(a.jsx)(i,{}),Object(a.jsx)("div",{id:"page",children:Object(a.jsx)("div",{children:"Welcome to Stranger's Things"})}),Object(a.jsx)(y.a,{path:"/registration",component:h}),Object(a.jsx)(y.a,{path:"/login",component:f}),Object(a.jsx)(y.a,{path:"/myposts",component:g}),Object(a.jsx)(y.a,{path:"/allPosts",component:b}),Object(a.jsx)("p",{})]})})};s.a.render(Object(a.jsx)(k,{}),document.getElementById("root"))}},[[202,1,2]]]);
//# sourceMappingURL=main.89abd895.chunk.js.map